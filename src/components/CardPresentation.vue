<template>
  <div class="fixed-holder" :class="{ hidden: !checking.shown }">
    <div class="container">
      <div class="left">
        <svg
          viewBox="0 0 685 477"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xml:space="preserve"
          xmlns:serif="http://www.serif.com/"
          style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"
        >
          <g transform="matrix(1,0,0,1,-6138.29,-6493.26)">
            <g transform="matrix(1,0,0,1,-5.32473,4941.23)">
              <g
                transform="matrix(1.53786,-0.153527,0.11995,1.20153,2915.89,1413.11)"
              >
                <path
                  d="M2481.52,475.532C2354.92,469.341 2228.23,463.47 2096.06,475.532C2093.01,547.585 2090.35,619.327 2096.06,684.286C2224.99,694.024 2353.15,686.932 2481.52,684.286C2491.52,618.979 2485.33,546.424 2481.52,475.532Z"
                  style="fill:rgb(233,233,233);"
                />
                <path
                  d="M2484.82,475.241C2484.71,473.079 2483.34,471.377 2481.64,471.294C2443.16,468.642 2404.69,465.906 2366.02,463.919C2327.62,461.946 2289.06,460.574 2250.18,460.371C2234.76,460.29 2219.3,460.418 2203.78,460.802C2168.06,461.686 2132.04,463.853 2095.6,467.235C2092.33,467.533 2089.75,470.896 2089.57,475.082C2087.92,517.559 2086.39,559.926 2086.64,600.862C2086.81,629.812 2087.87,658.047 2090.36,685.108C2090.67,688.659 2092.93,691.407 2095.72,691.618C2147.34,695.162 2198.81,695.984 2250.22,695.546C2327.41,694.89 2404.46,691.343 2481.58,689.341C2483.45,689.303 2485.04,687.601 2485.39,685.258C2489.46,658.164 2490.78,629.853 2490.63,600.937C2490.41,559.673 2487.2,517.169 2484.82,475.241ZM2478.41,479.683C2480.51,520.178 2483.27,561.164 2483.24,600.964C2483.21,627.788 2481.91,654.069 2478.25,679.281C2402.23,680.486 2326.28,683.244 2250.2,682.965C2200.63,682.783 2151,681.285 2101.28,677.348C2099.41,652.659 2098.74,627.031 2098.77,600.816C2098.82,562.537 2100.42,523.014 2102.22,483.33C2136.5,480.397 2170.42,478.77 2204.07,477.767C2219.51,477.306 2234.89,476.963 2250.23,476.726C2288.99,476.127 2327.44,476.356 2365.75,477.02C2403.41,477.673 2440.91,478.607 2478.41,479.683L2478.41,479.683Z"
                />
              </g>
            </g>
            <g transform="matrix(1,0,0,1,-5.32473,4941.23)">
              <g transform="matrix(1,0,0,1,27.1382,-4889.92)">
                <circle
                  cx="6205.49"
                  cy="6829.53"
                  r="89.018"
                  :style="{ fill: color(checking.presenting.team, 'dark') }"
                />
                <path
                  d="M6205.49,6740.51C6254.62,6740.51 6294.51,6780.4 6294.51,6829.53C6294.51,6878.66 6254.62,6918.55 6205.49,6918.55C6156.36,6918.55 6116.47,6878.66 6116.47,6829.53C6116.47,6780.4 6156.36,6740.51 6205.49,6740.51ZM6205.49,6751.05C6227.45,6750.39 6247.7,6758.51 6262.45,6772.57C6277.51,6786.91 6286.94,6807.11 6287.35,6829.53C6286.84,6851.91 6277.28,6871.97 6262.25,6886.29C6247.52,6900.31 6227.4,6908.55 6205.49,6907.98C6197.03,6907.98 6188.91,6906.55 6181.25,6904.15C6169.23,6900.38 6158.29,6894.14 6149.39,6885.63C6134.56,6871.44 6125.06,6851.65 6124.55,6829.53C6124.82,6807.31 6134.04,6787.23 6148.87,6772.91C6163.48,6758.81 6183.61,6750.55 6205.49,6751.05Z"
                />
              </g>
            </g>
            <g transform="matrix(1,0,0,1,-5.32473,4941.23)">
              <g
                transform="matrix(1.36915,-0.144496,0.240236,1.35904,-3849.16,-6184.05)"
              >
                <text
                  x="6358.92px"
                  y="6411.69px"
                  style="font-family:'ComicNeue-Bold', 'Comic Neue';font-weight:700;font-size:47.284px;"
                >
                  CLUE
                </text>
              </g>
            </g>
          </g>
        </svg>
      </div>
      <div
        class="right"
        :class="{
          wobble: checking.checked && !checking.presenting.correct,
          bounce: checking.checked && checking.presenting.correct,
        }"
      >
        <svg
          viewBox="0 0 691 480"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xml:space="preserve"
          xmlns:serif="http://www.serif.com/"
          style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"
        >
          <g transform="matrix(1,0,0,1,-7008.09,-6489.92)">
            <g transform="matrix(1,0,0,1,-5.32473,4936.68)">
              <g transform="matrix(1,0,0,1,0,4.54583)">
                <g
                  transform="matrix(-1.53786,-0.153527,-0.11995,1.20153,10926,1413.11)"
                >
                  <path
                    d="M2481.52,475.532C2354.92,469.341 2228.23,463.47 2096.06,475.532C2093.01,547.585 2090.35,619.327 2096.06,684.286C2224.99,694.024 2353.15,686.932 2481.52,684.286C2491.52,618.979 2485.33,546.424 2481.52,475.532Z"
                    :style="{ fill: guessColor }"
                  />
                  <path
                    d="M2481.74,467.92C2484.78,468.068 2487.25,471.126 2487.45,475.009C2489.49,517.02 2492.33,559.616 2492.21,600.932C2492.13,629.953 2490.6,658.349 2486.32,685.489C2485.87,688.389 2483.9,690.495 2481.6,690.543C2445.62,691.142 2409.65,691.869 2373.68,692.92C2319.69,694.497 2265.7,696.589 2211.61,696.261C2173.03,696.028 2134.4,694.682 2095.71,691.912C2092.81,691.693 2090.45,688.835 2090.13,685.141C2087.89,658.049 2087.06,629.806 2087.17,600.86C2087.31,559.944 2089.28,517.63 2091.35,475.205C2091.48,472.168 2093.35,469.727 2095.72,469.511C2134.78,466.236 2173.34,464.763 2211.56,463.907C2237.45,463.328 2263.18,462.991 2288.8,463.061C2353.6,463.237 2417.68,465.457 2481.74,467.92ZM2475.99,482.832C2401.17,478.422 2326.29,473.872 2250.22,473.876C2224.7,473.877 2199.05,474.433 2173.23,475.685C2149.17,476.852 2124.97,478.736 2100.58,481.136C2099.15,521.57 2097.93,561.849 2098.24,600.818C2098.46,626.934 2099.36,652.456 2101.43,677.031C2120.25,678.39 2139.07,679.344 2157.87,680.145C2188.68,681.457 2219.45,682.248 2250.2,682.419C2296.47,682.675 2342.69,682.114 2388.9,680.891C2418.41,680.11 2447.91,678.932 2477.42,678.135C2480.78,653.253 2481.84,627.368 2481.65,600.969C2481.37,562.177 2478.39,522.294 2475.99,482.832Z"
                  />
                </g>
                <g transform="matrix(1,0,0,1,1409.51,-4889.92)">
                  <circle
                    cx="6205.49"
                    cy="6829.53"
                    r="89.018"
                    :style="{ fill: color(checking.presenting.team, 'light') }"
                  />
                  <path
                    d="M6205.49,6740.51C6254.62,6740.51 6294.51,6780.4 6294.51,6829.53C6294.51,6878.66 6254.62,6918.55 6205.49,6918.55C6156.36,6918.55 6116.47,6878.66 6116.47,6829.53C6116.47,6780.4 6156.36,6740.51 6205.49,6740.51ZM6205.49,6747.22C6227.93,6747.89 6247.87,6757.72 6262.19,6772.83C6269.35,6780.38 6274.93,6789.34 6278.86,6799.15C6282.63,6808.55 6284.86,6818.78 6284.84,6829.53C6285.21,6851.59 6276.66,6871.76 6262.41,6886.45C6247.97,6901.32 6227.83,6910.64 6205.49,6910.93C6183.22,6910.47 6163.27,6900.96 6148.96,6886.06C6134.91,6871.42 6126.52,6851.4 6126.96,6829.53C6126.49,6807.64 6134.93,6787.68 6148.9,6772.94C6163.2,6757.83 6183.07,6747.94 6205.49,6747.22Z"
                  />
                </g>
                <g
                  transform="matrix(1.36921,0.14391,-0.239654,1.35915,124.495,-8035.12)"
                >
                  <text
                    x="6341.68px"
                    y="6411.69px"
                    style="font-family:'ComicNeue-Bold', 'Comic Neue';font-weight:700;font-size:47.284px;"
                  >
                    GUESS
                  </text>
                </g>
              </g>
            </g>
          </g>
        </svg>
      </div>
    </div>
    <div :style="{ fontSize: system.font_size }">
      <div class="floating-text card-content left-card">
        <div>{{ getWord("clue", "word") }}</div>
      </div>
      <div
        class="floating-text card-content right-card"
        :class="{
          wobble: checking.checked && !checking.presenting.correct,
          bounce: checking.checked && checking.presenting.correct,
        }"
      >
        <div>{{ getWord("guess", "word") }}</div>
      </div>
      <div class="floating-text user-bubble left-bubble">
        <div>{{ getWord("clue", "player") }}</div>
      </div>
      <div
        class="floating-text user-bubble right-bubble"
        :class="{
          wobble: checking.checked && !checking.presenting.correct,
          bounce: checking.checked && checking.presenting.correct,
        }"
      >
        <div>{{ getWord("guess", "player") }}</div>
      </div>
    </div>
    <svg
      v-if="showMark('check')"
      class="mark"
      viewBox="0 0 153 195"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xml:space="preserve"
      xmlns:serif="http://www.serif.com/"
      style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"
    >
      <g transform="matrix(1,0,0,1,-6944.56,-6647.51)">
        <g transform="matrix(1,0,0,1,-5.32473,4936.68)">
          <g transform="matrix(1,0,0,1,125.249,-4990.86)">
            <path
              d="M6967.01,6702.11C6983.77,6707.93 6975.41,6735.31 6966.49,6755.14C6957.57,6774.98 6944.6,6818.97 6942.06,6824.98C6939.52,6830.99 6919,6892.26 6903.25,6895.13C6887.51,6898 6882.72,6890.54 6869.97,6877.53C6857.21,6864.51 6834.56,6844.63 6827.3,6832.53C6820.04,6820.42 6829.22,6809.03 6836.13,6808.28C6843.05,6807.52 6851.2,6805.94 6857.22,6817.49C6863.23,6829.05 6873.37,6839.21 6879.07,6846.83C6885.34,6855.22 6896.84,6868.6 6896.84,6868.6C6896.84,6868.6 6906.98,6840.12 6910.92,6829.55C6914.86,6818.97 6927.69,6788.45 6930.78,6780.5C6933.89,6772.55 6942.34,6736.49 6946.12,6725.91C6951.48,6710.89 6958.94,6699.31 6967.01,6702.11Z"
              style="fill:rgb(0,213,46);"
            />
            <path
              d="M6967.01,6702.11C6983.77,6707.93 6975.41,6735.31 6966.49,6755.14C6957.57,6774.98 6944.6,6818.97 6942.06,6824.98C6939.52,6830.99 6919,6892.26 6903.25,6895.13C6887.51,6898 6882.72,6890.54 6869.97,6877.53C6857.21,6864.51 6834.56,6844.63 6827.3,6832.53C6820.04,6820.42 6829.22,6809.03 6836.13,6808.28C6843.05,6807.52 6851.2,6805.94 6857.22,6817.49C6863.23,6829.05 6873.37,6839.21 6879.07,6846.83C6885.34,6855.22 6896.84,6868.6 6896.84,6868.6C6896.84,6868.6 6906.98,6840.12 6910.92,6829.55C6914.86,6818.97 6927.69,6788.45 6930.78,6780.5C6933.89,6772.55 6942.34,6736.49 6946.12,6725.91C6951.48,6710.89 6958.94,6699.31 6967.01,6702.11ZM6964.83,6708.38C6969.9,6710.03 6970.66,6715.18 6970.34,6721.1C6969.8,6730.91 6965.65,6742.86 6961.37,6752.84C6958.94,6758.48 6956.22,6766.01 6953.49,6774.08C6946.55,6794.65 6939.58,6818.83 6937.8,6823.18C6936.3,6826.72 6928.6,6849.63 6919.1,6868.17C6915.37,6875.45 6911.34,6882 6907.41,6886.29C6905.61,6888.26 6903.99,6889.75 6902.32,6890.02C6897.07,6890.89 6893.39,6890.44 6890.14,6888.71C6884.94,6885.93 6880.82,6880.48 6874.14,6873.43C6865.88,6864.73 6853.39,6852.95 6843.77,6842.5C6839.19,6837.52 6835.28,6832.9 6833.03,6829.09C6831.14,6825.91 6831,6822.84 6831.89,6820.31C6832.89,6817.5 6834.84,6815.09 6836.85,6814.85C6839.81,6814.5 6843.07,6813.63 6846.17,6814.81C6848.15,6815.57 6849.93,6817.29 6851.61,6820.41C6854.08,6825 6857.13,6829.38 6860.34,6833.47C6865.38,6839.89 6870.78,6845.59 6874.41,6850.31L6892.74,6872.12C6893.99,6873.58 6895.93,6874.27 6897.82,6873.91C6899.72,6873.56 6901.28,6872.23 6901.93,6870.41L6915.64,6831.3L6935.88,6782.48C6936.74,6780.34 6938.01,6776.24 6939.48,6771.14C6943.46,6757.31 6949.07,6735.73 6951.94,6727.99C6953.97,6722.57 6956.28,6717.64 6958.8,6713.83C6960.14,6711.81 6961.53,6710.15 6962.99,6709.05C6963.6,6708.58 6964.17,6708.14 6964.83,6708.38L6964.83,6708.38Z"
            />
          </g>
        </g>
      </g>
    </svg>
    <svg
      v-if="showMark('cross')"
      class="mark cross"
      viewBox="0 0 144 142"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xml:space="preserve"
      xmlns:serif="http://www.serif.com/"
      style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"
    >
      <g transform="matrix(1,0,0,1,-6742.24,-6699.73)">
        <g transform="matrix(1,0,0,1,-5.32473,4936.68)">
          <g transform="matrix(1.29901,0,0,1.29901,-2078.42,-6935.18)">
            <path
              d="M6806.3,6702.46C6815.64,6695.57 6816.96,6697.54 6828.33,6709.26C6839.7,6720.99 6850.32,6738 6850.32,6738C6850.32,6738 6889.43,6691.15 6896.72,6696.47C6904.02,6701.79 6909.44,6701.74 6898.95,6717.49C6888.47,6733.25 6884.07,6738.76 6876.39,6744.71C6868.72,6750.66 6865.06,6755.28 6865.06,6755.28C6865.06,6755.28 6887.44,6776.53 6894.82,6789.98C6902.2,6803.42 6890.53,6807.4 6880.3,6804.19C6870.06,6800.98 6847.3,6766.4 6847.3,6766.4C6847.3,6766.4 6817.32,6797.18 6812.56,6800.31C6804.74,6805.45 6801.38,6804.97 6797.29,6800.33C6794.36,6797 6793.17,6792.37 6796.09,6787.59C6801.14,6779.28 6808.24,6773.51 6813.95,6768.05C6825.23,6757.27 6830.03,6752.16 6830.03,6752.16C6830.03,6752.16 6809.81,6727.14 6806.3,6720.97C6802.78,6714.8 6801.75,6705.81 6806.3,6702.46Z"
              style="fill:rgb(255,88,76);"
            />
            <path
              d="M6806.3,6702.46C6815.64,6695.57 6816.96,6697.54 6828.33,6709.26C6839.7,6720.99 6850.32,6738 6850.32,6738C6850.32,6738 6889.43,6691.15 6896.72,6696.47C6904.02,6701.79 6909.44,6701.74 6898.95,6717.49C6888.47,6733.25 6884.07,6738.76 6876.39,6744.71C6868.72,6750.66 6865.06,6755.28 6865.06,6755.28C6865.06,6755.28 6887.44,6776.53 6894.82,6789.98C6902.2,6803.42 6890.53,6807.4 6880.3,6804.19C6870.06,6800.98 6847.3,6766.4 6847.3,6766.4C6847.3,6766.4 6817.32,6797.18 6812.56,6800.31C6804.74,6805.45 6801.38,6804.97 6797.29,6800.33C6794.36,6797 6793.17,6792.37 6796.09,6787.59C6801.14,6779.28 6808.24,6773.51 6813.95,6768.05C6825.23,6757.27 6830.03,6752.16 6830.03,6752.16C6830.03,6752.16 6809.81,6727.14 6806.3,6720.97C6802.78,6714.8 6801.75,6705.81 6806.3,6702.46ZM6895.11,6699.59C6896.57,6700.63 6897.94,6701.47 6899.11,6702.27C6900.07,6702.94 6900.93,6703.42 6901.22,6704.31C6901.42,6704.93 6901.23,6705.68 6900.87,6706.71C6900.13,6708.86 6898.53,6711.64 6895.92,6715.48C6890.65,6723.17 6886.92,6728.36 6883.54,6732.33C6880.34,6736.09 6877.47,6738.71 6873.85,6741.43C6871.36,6743.3 6869.28,6745.05 6867.57,6746.57C6863.56,6750.15 6861.62,6752.55 6861.62,6752.55C6860.21,6754.33 6860.39,6756.9 6862.04,6758.46C6862.04,6758.46 6871.78,6768.03 6880.35,6778.33C6884.38,6783.19 6888.16,6788.19 6890.4,6792.4C6892.21,6795.76 6892.88,6797.88 6891.29,6799.05C6889.1,6800.65 6885.34,6800.37 6881.84,6799.27C6878.53,6798.26 6873.95,6793.17 6869.17,6787.6C6860.07,6776.98 6851.15,6763.87 6851.15,6763.87C6850.38,6762.7 6849.12,6761.95 6847.74,6761.81C6846.35,6761.68 6844.97,6762.19 6844,6763.19C6844,6763.19 6830.59,6777.34 6820.41,6787.52C6815.74,6792.18 6811.82,6795.99 6810.36,6796.98C6807.77,6798.71 6805.85,6799.78 6804.19,6800.03C6802.57,6800.27 6801.53,6799.26 6800.2,6797.76C6799.2,6796.62 6798.48,6795.27 6798.33,6793.77C6798.2,6792.45 6798.56,6791.06 6799.43,6789.62C6801.23,6786.72 6803.3,6784.17 6805.46,6781.83C6809.23,6777.76 6813.29,6774.36 6816.82,6771.05L6833.23,6755.16C6834.73,6753.57 6834.82,6751.11 6833.44,6749.4C6833.44,6749.4 6825.78,6739.69 6819.16,6730.85C6815.29,6725.67 6811.78,6720.81 6810.53,6718.56C6809.3,6716.32 6808.5,6713.62 6808.32,6711.11C6808.18,6709.27 6808.12,6707.44 6809.33,6706.57C6810.8,6705.45 6812.01,6704.57 6813.11,6703.99C6813.73,6703.66 6814.18,6703.31 6814.7,6703.46C6817.3,6704.17 6819.81,6707.36 6824.98,6712.52C6829.06,6716.6 6833.06,6721.35 6836.49,6725.76C6842.53,6733.52 6846.83,6740.18 6846.83,6740.18C6847.53,6741.3 6848.72,6742.01 6850.03,6742.1C6851.35,6742.19 6852.62,6741.65 6853.47,6740.64C6853.47,6740.64 6866.39,6724.69 6878.67,6712.47C6883.35,6707.81 6887.92,6703.69 6891.6,6701.3C6892.86,6700.47 6894.58,6699.79 6895.11,6699.59Z"
            />
          </g>
        </g>
      </g>
    </svg>
  </div>
</template>

<script>
import { mapState } from "vuex";

import Colors from "../assets/colors.json";

export default {
  methods: {
    getWord(clueORcard, wordORplayer) {
      if (
        this.checking.presenting[clueORcard] &&
        this.checking.presenting[clueORcard][wordORplayer]
      ) {
        return this.checking.presenting[clueORcard][wordORplayer];
      } else {
        return "";
      }
    },
    showMark(type) {
      if (this.checking.checked) {
        if (type == "check" && this.checking.presenting.correct == true) {
          return true;
        }
        if (type == "cross" && this.checking.presenting.correct == false) {
          return true;
        }
      } else {
        return false;
      }
    },
    color(color, lightness) {
      if (Colors[color] && Colors[color][lightness]) {
        return Colors[color][lightness];
      } else {
        return "rgba(0,0,0,0)";
      }
    },
  },
  computed: {
    ...mapState(["system", "checking"]),
    presentingIteration() {
      return this.checking.iteration;
    },
    guessColor() {
      if (this.checking.checked) {
        return Colors[this.checking.presenting.color].faint;
      } else {
        return "rgb(233,233,233)";
      }
    },
  },
};
</script>

<style scoped>
.container {
  position: absolute;
  width: 80%;
  height: 50%;
  left: 10%;
  top: 35%;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.container > div {
  display: flex;
  align-items: center;
}

.left {
  justify-content: flex-start;
}

.right {
  justify-content: flex-end;
}

svg {
  width: 90%;
}

.floating-text {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
}

.card-content {
  top: 46%;
  width: 30.5%;
  height: 22%;
  font-size: 260%;
}

.left-card {
  left: 14%;
}

.left-card > div {
  transform: rotate(-6deg);
}

.right-card {
  right: 14%;
}

.right-card > div {
  transform: rotate(6deg);
}

.user-bubble {
  top: 66%;
  width: 9%;
  height: 16%;
  font-size: 100%;
}

.left-bubble {
  left: 10%;
  color: white;
}

.right-bubble {
  right: 10%;
}

.mark {
  position: absolute;
  top: 54%;
  left: 51%;
  width: 8%;
  animation: fall-in 0.3s ease 1;
}
@keyframes fall-in {
  0% {
    transform: translateY(-70%);
    opacity: 0;
  }
  30% {
    opacity: 1;
  }
  100% {
    transform: translateY(0);
  }
}

.cross {
  margin-top: 2%;
}

.fixed-holder {
  transition: opacity 0.5s ease-in-out;
}

.wobble {
  animation: wobble 1s ease 1;
}
@keyframes wobble {
  5%,
  20% {
    transform: translateX(3vw);
  }
  10%,
  30% {
    transform: translateX(-3vw);
  }
  40%,
  60% {
    transform: translateX(2vw);
  }
  50%,
  70% {
    transform: translateX(-2vw);
  }
}

.bounce {
  animation: bounce 1s ease 1;
}
@keyframes bounce {
  10%,
  40% {
    transform: translateY(-3vh);
  }
  20%,
  60% {
    transform: translateY(2vh);
  }
  80% {
    transform: translateY(-1vh);
  }
}
</style>
